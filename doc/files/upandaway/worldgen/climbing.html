<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../../../luadoc.css" type="text/css" />
	<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../../../index.html">Index</a></li>
	
</ul>


<!-- Module list -->

<h1>Modules</h1>
<ul>

	<li>
		<a href="../../../modules/upandaway.api_abstractions.html">upandaway.api_abstractions</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.components.climbable.html">upandaway.components.climbable</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.components.staticgenerator.html">upandaway.components.staticgenerator</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.components.upandaway_metadata.html">upandaway.components.upandaway_metadata</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.lib.addstrings.html">upandaway.lib.addstrings</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.main.html">upandaway.main</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.map.layouts.html">upandaway.map.layouts</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.map.levels.html">upandaway.map.levels</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.map.levels.sky_level_1.html">upandaway.map.levels.sky_level_1</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.map.rooms.html">upandaway.map.rooms</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.map.rooms.cloud.html">upandaway.map.rooms.cloud</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.map.tasks.html">upandaway.map.tasks</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.map.tasks.cloud.html">upandaway.map.tasks.cloud</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.map.tiledefs.html">upandaway.map.tiledefs</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.markovchain.html">upandaway.markovchain</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.prefabs.beanstalk.html">upandaway.prefabs.beanstalk</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.prefabs.beanstalk_exit.html">upandaway.prefabs.beanstalk_exit</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.prefabs.cloud_lightning.html">upandaway.prefabs.cloud_lightning</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.prefabs.cloud_mist.html">upandaway.prefabs.cloud_mist</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.prefabs.cloudrealm.html">upandaway.prefabs.cloudrealm</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.prefabs.sheep.html">upandaway.prefabs.sheep</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.rc.defaults.html">upandaway.rc.defaults</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.rc.schema.html">upandaway.rc.schema</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.strings.html">upandaway.strings</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.worldgen.climbing.html">upandaway.worldgen.climbing</a>
	</li>

	<li>
		<a href="../../../modules/upandaway.worldgen_main.html">upandaway.worldgen_main</a>
	</li>

</ul>



<!-- File list -->

<h1>Files</h1>
<ul>

	<li>
		<a href="../../../files/brains/eelbrain.html">brains/eelbrain.lua</a>
	</li>

	<li>
		<a href="../../../files/brains/rambrain.html">brains/rambrain.lua</a>
	</li>

	<li>
		<a href="../../../files/brains/sheepbrain.html">brains/sheepbrain.lua</a>
	</li>

	<li>
		<a href="../../../files/components/climbable.html">components/climbable.lua</a>
	</li>

	<li>
		<a href="../../../files/components/staticgenerator.html">components/staticgenerator.lua</a>
	</li>

	<li>
		<a href="../../../files/components/upandaway_metadata.html">components/upandaway_metadata.lua</a>
	</li>

	<li>
		<a href="../../../files/map/static_layouts/beanstalk_top.html">map/static_layouts/beanstalk_top.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/aetheel.html">prefabs/aetheel.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/anim_test.html">prefabs/anim_test.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/antlion.html">prefabs/antlion.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/beanstalk.html">prefabs/beanstalk.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/beanstalk_chunk.html">prefabs/beanstalk_chunk.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/beanstalk_exit.html">prefabs/beanstalk_exit.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/bee_marshmallow.html">prefabs/bee_marshmallow.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/candy_fruit.html">prefabs/candy_fruit.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/cloud_bush.html">prefabs/cloud_bush.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/cloud_cotton.html">prefabs/cloud_cotton.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/cloud_lightning.html">prefabs/cloud_lightning.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/cloud_mist.html">prefabs/cloud_mist.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/cloud_turf.html">prefabs/cloud_turf.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/cloudcrag.html">prefabs/cloudcrag.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/cloudrealm.html">prefabs/cloudrealm.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/flying_fish.html">prefabs/flying_fish.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/golden_egg.html">prefabs/golden_egg.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/goose.html">prefabs/goose.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/hive_marshmallow.html">prefabs/hive_marshmallow.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/longbill.html">prefabs/longbill.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/magic_beans.html">prefabs/magic_beans.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/marshmallow.html">prefabs/marshmallow.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/sheep.html">prefabs/sheep.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/sheepherd.html">prefabs/sheepherd.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/shopkeeper.html">prefabs/shopkeeper.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/sky_chest.html">prefabs/sky_chest.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/skyflies.html">prefabs/skyflies.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/skyflower.html">prefabs/skyflower.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/skyflower_petals.html">prefabs/skyflower_petals.lua</a>
	</li>

	<li>
		<a href="../../../files/prefabs/turf_test.html">prefabs/turf_test.lua</a>
	</li>

	<li>
		<a href="../../../files/scenarios/beanstalktop.html">scenarios/beanstalktop.lua</a>
	</li>

	<li>
		<a href="../../../files/scenarios/skylevel.html">scenarios/skylevel.lua</a>
	</li>

	<li>
		<a href="../../../files/stategraphs/SGSheep.html">stategraphs/SGSheep.lua</a>
	</li>

	<li>
		<a href="../../../files/stategraphs/SGeel.html">stategraphs/SGeel.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/api_abstractions.html">upandaway/api_abstractions.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/components/climbable.html">upandaway/components/climbable.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/components/staticgenerator.html">upandaway/components/staticgenerator.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/components/upandaway_metadata.html">upandaway/components/upandaway_metadata.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/lib/addstrings.html">upandaway/lib/addstrings.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/main.html">upandaway/main.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/map/layouts.html">upandaway/map/layouts.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/map/levels.html">upandaway/map/levels.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/map/levels/sky_level_1.html">upandaway/map/levels/sky_level_1.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/map/rooms.html">upandaway/map/rooms.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/map/rooms/cloud.html">upandaway/map/rooms/cloud.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/map/static_layouts/beanstalk_top.html">upandaway/map/static_layouts/beanstalk_top.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/map/tasks.html">upandaway/map/tasks.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/map/tasks/cloud.html">upandaway/map/tasks/cloud.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/map/tiledefs.html">upandaway/map/tiledefs.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/markovchain.html">upandaway/markovchain.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/prefabs/beanstalk.html">upandaway/prefabs/beanstalk.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/prefabs/beanstalk_exit.html">upandaway/prefabs/beanstalk_exit.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/prefabs/cloud_lightning.html">upandaway/prefabs/cloud_lightning.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/prefabs/cloud_mist.html">upandaway/prefabs/cloud_mist.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/prefabs/cloudrealm.html">upandaway/prefabs/cloudrealm.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/prefabs/sheep.html">upandaway/prefabs/sheep.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/rc/defaults.html">upandaway/rc/defaults.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/rc/schema.html">upandaway/rc/schema.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/resources/shopkeeper_speech.html">upandaway/resources/shopkeeper_speech.lua</a>
	</li>

	<li>
		<a href="../../../files/upandaway/strings.html">upandaway/strings.lua</a>
	</li>

	<li><strong>upandaway/worldgen/climbing.lua</strong></li>
	
	<li>
		<a href="../../../files/upandaway/worldgen_main.html">upandaway/worldgen_main.lua</a>
	</li>

</ul>






</div> <!-- id="navigation" -->

<div id="content">

<h1>File <code>upandaway/worldgen/climbing.lua</code></h1>


<p>Functions for adding, entering, exiting and failing (dying in) a cloud realm, as well as a few utility functions. </p>






<h2>Functions</h2>
<table class="function_list">

	<tr>
	<td class="name" nowrap><a href="#AddCloudLevel">AddCloudLevel</a>&nbsp;(data)</td>
	<td class="summary">Adds a new cloud level.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#Climb">Climb</a>&nbsp;(direction, cavenum)</td>
	<td class="summary">Climbs in a direction.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#ClimbTo">ClimbTo</a>&nbsp;(height, cavenum)</td>
	<td class="summary">Climbs to the given height.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#GetLevelHeight">GetLevelHeight</a>&nbsp;()</td>
	<td class="summary">Returns the height of the level we are currently in.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#GetMaxHeight">GetMaxHeight</a>&nbsp;()</td>
	<td class="summary">Returns the maximum height among all registered levels.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#GetMinHeight">GetMinHeight</a>&nbsp;()</td>
	<td class="summary">Returns the minimum height among all registered levels (including default ones).</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#GetNextLevel">GetNextLevel</a>&nbsp;()</td>
	<td class="summary">Returns the next level number (for climbing up).</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#GetPreviousLevel">GetPreviousLevel</a>&nbsp;()</td>
	<td class="summary">Returns the previous level number (for climbing down).</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#GetRawLevelHeight">GetRawLevelHeight</a>&nbsp;()</td>
	<td class="summary">As GetLevelHeight(), but based on the level number alone.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#IsCloudLevel">IsCloudLevel</a>&nbsp;()</td>
	<td class="summary">Returns whether we are in a cloud level or not.</td>
	</tr>

</table>






<br/>
<br/>




<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="AddCloudLevel"></a><strong>AddCloudLevel</strong>&nbsp;(data)</dt>
<dd>
Adds a new cloud level. Also embedded as TheMod:AddCloudLevel(). 


<h3>Parameters</h3>
<ul>
	
	<li>
	  data: A table describing the level, as in the second parameter of AddLevel. 
	</li>
	
</ul>








</dd>




<dt><a name="Climb"></a><strong>Climb</strong>&nbsp;(direction, cavenum)</dt>
<dd>
Climbs in a direction. 


<h3>Parameters</h3>
<ul>
	
	<li>
	  direction: A number. Its sign dictates the direction.  Calls ClimbTo to do the actual work. 
	</li>
	
	<li>
	  cavenum: 
	</li>
	
</ul>








<h3>See also:</h3>
<ul>
	
	<li><a href="../../../files/upandaway/worldgen/climbing.html#ClimbTo">
		ClimbTo
	</a>
	
</ul>

</dd>




<dt><a name="ClimbTo"></a><strong>ClimbTo</strong>&nbsp;(height, cavenum)</dt>
<dd>
Climbs to the given height. It should be an integer. 


<h3>Parameters</h3>
<ul>
	
	<li>
	  height: The target height.
	</li>
	
	<li>
	  cavenum: The number of the target "cave". If not given, the current cave number is used, raising an error if we're not in a cave level. 
	</li>
	
</ul>








<h3>See also:</h3>
<ul>
	
	<li><a href="../../../files/upandaway/worldgen/climbing.html#Climb">
		Climb
	</a>
	
</ul>

</dd>




<dt><a name="GetLevelHeight"></a><strong>GetLevelHeight</strong>&nbsp;()</dt>
<dd>
Returns the height of the level we are currently in.  The height is 0 for a survival map, 1 for the first cloud level, 2 for the second one, etc. For the first cave level, it is -1, for the second one it is -2, etc. <br /><br /> This is primarily meant to be used as a test for whether we are in a cloud level or not. <br /><br /> Works both under normal game and under worldgen (using different methods). <br /><br /> At worldgen, the level number is used. At normal game, the level number is used except when we are at a cloud level, where the level id is used instead. The level id is given preference because the level number can possibly change for compatibility reasons, so this allows us to keep our system compatible with older saves. 









</dd>




<dt><a name="GetMaxHeight"></a><strong>GetMaxHeight</strong>&nbsp;()</dt>
<dd>
Returns the maximum height among all registered levels.  This works even if there are no cloud levels (returning 0).









</dd>




<dt><a name="GetMinHeight"></a><strong>GetMinHeight</strong>&nbsp;()</dt>
<dd>
Returns the minimum height among all registered levels (including default ones).









</dd>




<dt><a name="GetNextLevel"></a><strong>GetNextLevel</strong>&nbsp;()</dt>
<dd>
Returns the next level number (for climbing up).  Returns nil if there are none. 0 means survival map.









</dd>




<dt><a name="GetPreviousLevel"></a><strong>GetPreviousLevel</strong>&nbsp;()</dt>
<dd>
Returns the previous level number (for climbing down).  Returns nil if there are none. 0 means survival map.









</dd>




<dt><a name="GetRawLevelHeight"></a><strong>GetRawLevelHeight</strong>&nbsp;()</dt>
<dd>
As GetLevelHeight(), but based on the level number alone. 









<h3>See also:</h3>
<ul>
	
	<li><a href="../../../files/upandaway/worldgen/climbing.html#GetLevelHeight">
		GetLevelHeight
	</a>
	
</ul>

</dd>




<dt><a name="IsCloudLevel"></a><strong>IsCloudLevel</strong>&nbsp;()</dt>
<dd>
Returns whether we are in a cloud level or not.  First, it checks if the world entity has the "cloudrealm" tag. If it does, returns true. If not, checks if the level height is positive. 







<h3>Return value:</h3>
A boolean



</dd>


</dl>







</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->	
</body>
</html>
